$(function(){function n(){$("#ajaxLi>li").each(function(n){e>0&&i[n].setMap(null);var t=$("#ajaxLi>li:nth-child("+(n+1)+") .clear"),l=$(t).find(".mainInfo>p:nth-child(1)>span");$(l).html(""),$(l).html($(l).html()+$(o).eq(n)[0].shop_name);var p=$(t).find(".mainInfo>p:nth-child(2)");$(p).html("<span>主营:</span>"+$(o).eq(n)[0].main);var s=$(t).find(".mainInfo>p:nth-child(3)");s.html("<span>地址:</span>"+$(o).eq(n)[0].addr);var c=$(t).find(".slideInfo>p:nth-child(3)>span");c.html(""),c.html(c.html()+$(o).eq(n)[0].shop_visit);var r=$(o).eq(n)[0].map_latitude,h=$(o).eq(n)[0].map_longitude;i[n]=new AMap.Marker({position:[h,r]}),i[n].setMap(a),i[n].addOverlay=function(){console.log(1)};var d=new AMap.InfoWindow({content:"信息窗体<br>这里是方恒科技大厦",offset:new AMap.Pixel(0,-28)});d.open(a,i[n].getPosition())}),e++}$("#matte").slideDown(1),$("#map").slideDown(1);var a=new AMap.Map("container",{resizeEnable:!0,zoom:10});AMap.plugin(["AMap.ToolBar","AMap.Scale","AMap.OverView"],function(){a.addControl(new AMap.ToolBar),a.addControl(new AMap.Scale),a.addControl(new AMap.OverView({isOpen:!1}))}),$(".page>span:nth-child(3)").css({backgroundColor:"darkorange",color:"whitesmoke",border:"solid 1px darkorange",fontSize:"16px"}),$("header>section>nav,.mainContent,footer,#chaCity button").on("click",function(n){$("#chaCity").slideUp(100)}),$("a").on("click",function(n){n.preventDefault()}),$(".chaCity").on("click",function(n){n.preventDefault(),$("#chaCity").slideDown(100),$("#hotCity").html("");var a=["北京","上海","广州","天津","西安","深圳","武汉","成都","重庆","南京","沈阳","杭州","济南","郑州","青岛","苏州"];$(a).each(function(n){$("#hotCity").html($("#hotCity").html()+"<span>"+$(a).eq(n)[0]+"<span>")}),n.stopImmediatePropagation()});var o=null;$.ajax({url:"/shop/json/1",dataType:"json",type:"get",success:function(a){o=a.shop_data,n()}});var t=$("#ajaxLi>li").length;$(".page>span").each(function(){$(this).on("click",function(a){var e=$(this).html();$(".page span").css({backgroundColor:"",color:"",border:"",fontWeight:""}),$(".page>span").each(function(n){$(this).html()==e&&$(this).css({backgroundColor:"darkorange",color:"whitesmoke",border:"solid 1px darkorange",fontWeight:"600"})}),$.ajax({url:"/shop/json/"+e,dataType:"json",type:"get",success:function(a){o=a.shop_data,n();for(var e=0;e<t;e++);}})})});var e=0,i={};$("#getMap").on("click",function(n){$("#matte").slideDown(200),setTimeout(function(){$("#map").slideDown(500)},500)}),$("#map h5 span").on("click",function(n){$("#map").slideUp(1e3),setTimeout(function(){$("#matte").slideUp(200)},1e3)})});